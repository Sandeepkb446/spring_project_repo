package com.sample.service;

import java.util.Optional;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import com.sample.entity.ProductEntity;
import com.sample.repository.IProductRepository;
import com.sample.request.ProductRequest;

@Service
public class ProductServiceImpl implements IProductService {

	@Autowired
	IProductRepository iProductRepository;
	@Override
	public ProductEntity getProduct(String name) {
		ProductEntity entity = 	iProductRepository.findByPname(name).orElseThrow(()-> new IllegalArgumentException("invalid product name"));
		return entity;
	}
	@Override
	public String insertProduct(ProductRequest request) {
		Optional<ProductEntity> opt = 	iProductRepository.findByPname(request.getPname());
		
		if(opt.isPresent()) {
			return "Product is Allready Inserted";
		}
		
		ProductEntity entity = new ProductEntity();
		entity.setPname(request.getPname());
		entity.setPrice(request.getPrice());
		
		entity = iProductRepository.save(entity);
		return "Product added Successfully";
		
	}
	

}
